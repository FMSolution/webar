<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">

<title>iFood - AR Buu Digital</title>

<script src="//cdn.8thwall.com/web/aframe/8frame-0.9.0.min.js"></script>

<script src="//cdn.8thwall.com/web/xrextras/xrextras.js"></script>
    
<script src="//apps.8thwall.com/xrweb?appKey=wtSsZpkl2OGdCP3ZI82ii3Wpkbl5SAMOcy4ecBLIry7TgQplq9w9UnZCpVCm322YE3QsT9"></script>

<script type="text/javascript">
AFRAME.registerComponent('physics-image-target', {
  schema: {
    name: { type: 'string' }
  },
  init: function () {
    const object3D = this.el.object3D
    const name = this.data.name
    const scene = this.el.sceneEl
    const portalPos = this.el
    const container = document.getElementById('photoModeContainer')

    //Container starts hidden so it isn't visible when the page is still loading
    container.style.display = 'block'
    
    var treeShook = false 
    object3D.visible = false
    
    let attachment = scene.querySelector('#attachment')
    let text = document.querySelector('#shake-tree')
    let videotop = scene.querySelector('#palm')
    // hideImage handles hiding the virtual object when the image target is lost
    const imageFound = (e) => {
      showImage(e)       
      console.log('ifoood');

    }

    const showImage = ({detail}) => {
      if (name != detail.name) {
        return
      }
      object3D.position.copy(detail.position)
      object3D.quaternion.copy(detail.rotation)
      object3D.scale.set(detail.scale, detail.scale, detail.scale)
      object3D.visible = true                
    }

    const imageLost = (e) => {
      // object3D.visible = false
    }

    scene.addEventListener('xrimagefound', imageFound)
    scene.addEventListener('xrimageupdated', showImage)
    scene.addEventListener('xrimagelost', imageLost)
  }
}); 

AFRAME.registerComponent('gallery', {
  schema: {},
  init: function () {
    var image1 = document.querySelector('#index1');
      image1.addEventListener('click', function(e) {
        window.open("https://www.ifood.com.br/delivery/guarulhos-sp");
      })
    var image2 = document.querySelector('#index2');
      image2.addEventListener('click', function(e) {
        window.open("https://www.ifood.com.br/lista-restaurantes");
      })
    var image3 = document.querySelector('#index3');
      image3.addEventListener('click', function(e) {
        window.open("https://www.ifood.com.br/delivery/descobrir/entrega-gratis/");
      })
     var image4 = document.querySelector('#index4');
      image4.addEventListener('click', function(e) {
        window.open("https://www.ifood.com.br/delivery/descobrir/restaurantes-famosos/");
      })
    var image5 = document.querySelector('#index5');
      image5.addEventListener('click', function(e) {
        window.open("https://www.ifood.com.br/delivery/descobrir/queridinhos-em-promocao/");
      })        

  
  }
});
</script>
<style type="text/css">
  #photoModeContainer {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    right: 0;
    z-index: 10;  
    width: 50px;  
  }
</style>
</head>
    
    <body>
      <!-- These HTML elements are used to show an UI laid over the scene -->
    
      
        <a-scene gallery
            xrweb="disableWorldTracking: true"
            xrextras-gesture-detector            
            antialias="true"
            tap-place
            xrextras-almost-there
            xrextras-loading="
              loadBackgroundColor: #fff;
              cameraBackgroundColor: #fff;
              loadImage: #myCustomImage;
              loadAnimation: pulse"
            xrextras-runtime-error
            xrweb>
            <div id="photoModeContainer" style="display: none">
              <div id='banner_mobile1' ></div> 
            </div>
            <a-assets>
                <img id="iFood1" src="assets/logo-ifood1.png?v1"><div>Clique agora e abra o app</div>
                <img id="iFood2" src="assets/logo-ifood2.png?v1">
                <img id="iFood3" src="assets/logo-ifood3.png?v1">
                <img id="iFood4" src="assets/logo-ifood4.png?v1">
                <img id="iFood5" src="assets/logo-ifood5.png?v1">

                <img id="myCustomImage" src="preload.png">
            </a-assets>
        
            <a-camera
                raycaster="objects: .cantap"
                cursor="fuse: false; rayOrigin: mouse;"
                wasd-controls-enabled="true">
            </a-camera>            
            <a-entity physics-image-target="name: 03" visible="false" id="palm">
              <a-image id="index1" class="cantap" position="0.8 1.8 0" rotation="0 0 0" scale="1 1 1"
                width="1.7" height="0.862" opacity="1" src="#iFood1"
                roughness="1" visible="true">
              </a-image>
              <a-image id="index2" class="cantap" position="1.3 -0.6 0" rotation="0 0 0" scale="1 1 1"
                  width="1.7" height="0.862" opacity="1" src="#iFood2"
                  roughness="1" visible="true">
              </a-image>
              <a-image id="index3" class="cantap" position="1.3 1 0" rotation="0 0 0" scale="1 1 1"
                  width="1.7" height="0.862" opacity="1" src="#iFood3"
                  roughness="1" visible="true">
              </a-image>
              <a-image id="index4" class="cantap" position="0.8 -1.4 0" rotation="0 0 0" scale="1 1 1"
                width="1.7" height="0.862" opacity="1" src="#iFood4"
                roughness="1" visible="true">
              </a-image>
              <a-image id="index5" class="cantap" position="1.3 0.2 0" rotation="0 0 0" scale="1 1 1"
                width="1.7" height="0.862" opacity="1" src="#iFood5"
                roughness="1" visible="true">
              </a-image>
            </a-entity>
        </a-scene>




<!--Main Slider ends -->   
<!-- TEALIUM -->
<script type="text/javascript">
  var utag_data = utag_data || {};
  utag_data.structure_tree = ["buutestear.globo.com"];
  utag_data.tipo_pagina = 'home';
  utag_data.page_name = 'index';
  utag_data.ad_unit = 'tvg_Outros/Especial_Exclusivo';
  utag_data.ad_positions = JSON.stringify(
    { "mobile": ["banner_mobile1"], "desktop": ["banner_slb_topo"]}
  );
</script>

<script type="text/javascript">
  (function (a, b, c, d) {
    a = '//tags.globo.com/utag/globo/gshow/prod/utag.js';
    b = document;
    c = 'script';
    d = b.createElement(c);
    d.src = a;
    d.type = 'text/java' + c;
    d.async = true;
    a = b.getElementsByTagName(c)[0];
    a.parentNode.insertBefore(d, a);
  })();
</script>
<!-- TEALIUM -->
<!-- Global site tag (gtag.js) - Google Analytics -->

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-156565470-3"></script>

<script>

  window.dataLayer = window.dataLayer || [];

  function gtag(){dataLayer.push(arguments);}

  gtag('js', new Date());

 

  gtag('config', 'UA-156565470-3');

</script>
    </body>
</html>

